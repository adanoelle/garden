<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Garden Components Demo</title>
  
  <!-- Commit Mono font -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/commit-mono@1.143/commitmono.css">
  
  <!-- Garden tokens -->
  <link rel="stylesheet" href="../src/styles/tokens.css">
  
  <style>
    body {
      margin: 0;
      padding: var(--garden-space-8);
      background: var(--garden-bg);
      color: var(--garden-fg);
      font-family: var(--garden-font-mono);
      line-height: var(--garden-leading-normal);
      min-height: 100vh;
      transition: background-color var(--garden-duration-normal) var(--garden-ease-out),
                  color var(--garden-duration-normal) var(--garden-ease-out);
    }
    
    .demo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--garden-space-8);
      padding-bottom: var(--garden-space-4);
      border-bottom: var(--garden-border-width) solid var(--garden-fg);
    }
    
    .demo-title {
      font-size: var(--garden-text-2xl);
      font-weight: 400;
      margin: 0;
    }
    
    .theme-toggle {
      background: transparent;
      border: var(--garden-border-width) solid var(--garden-fg);
      color: var(--garden-fg);
      font-family: var(--garden-font-mono);
      font-size: var(--garden-text-sm);
      padding: var(--garden-space-2) var(--garden-space-4);
      cursor: pointer;
      transition: background-color var(--garden-duration-fast) var(--garden-ease-out),
                  color var(--garden-duration-fast) var(--garden-ease-out);
    }
    
    .theme-toggle:hover {
      background-image: var(--garden-dither-50);
      background-size: 2px 2px;
      color: var(--garden-bg);
    }
    
    .theme-toggle:active {
      background-image: none;
      background-color: var(--garden-fg);
      color: var(--garden-bg);
    }
    
    .demo-section {
      margin-bottom: var(--garden-space-8);
    }
    
    .demo-section h2 {
      font-size: var(--garden-text-lg);
      font-weight: 400;
      margin: 0 0 var(--garden-space-4) 0;
      color: var(--garden-fg-muted);
    }
    
    .color-swatches {
      display: flex;
      gap: var(--garden-space-2);
      flex-wrap: wrap;
    }
    
    .swatch {
      width: 80px;
      height: 80px;
      display: flex;
      align-items: flex-end;
      padding: var(--garden-space-1);
      font-size: var(--garden-text-xs);
      border: var(--garden-border-width) solid var(--garden-fg);
    }
    
    .component-grid {
      display: flex;
      gap: var(--garden-space-4);
      flex-wrap: wrap;
      align-items: flex-start;
    }
  </style>
</head>
<body>
  <header class="demo-header">
    <h1 class="demo-title">Garden Components</h1>
    <button class="theme-toggle" onclick="toggleTheme()">toggle theme</button>
  </header>
  
  <section class="demo-section">
    <h2>Color Palette</h2>
    <div class="color-swatches">
      <div class="swatch" style="background: var(--garden-pointing); color: var(--garden-railings);">pointing</div>
      <div class="swatch" style="background: var(--garden-wimborne); color: var(--garden-railings);">wimborne</div>
      <div class="swatch" style="background: var(--garden-skimming); color: var(--garden-railings);">skimming</div>
      <div class="swatch" style="background: var(--garden-purbeck); color: var(--garden-railings);">purbeck</div>
      <div class="swatch" style="background: var(--garden-moles-breath); color: var(--garden-pointing);">mole's breath</div>
      <div class="swatch" style="background: var(--garden-hague); color: var(--garden-pointing);">hague</div>
      <div class="swatch" style="background: var(--garden-railings); color: var(--garden-pointing);">railings</div>
    </div>
  </section>
  
  <section class="demo-section">
    <h2>Dither Patterns</h2>
    <div class="color-swatches">
      <div class="swatch" style="background-image: var(--garden-dither-25); background-size: 4px 4px; background-color: var(--garden-bg);">25%</div>
      <div class="swatch" style="background-image: var(--garden-dither-50); background-size: 2px 2px; background-color: var(--garden-bg);">50%</div>
      <div class="swatch" style="background-image: var(--garden-dither-75); background-size: 4px 4px; background-color: var(--garden-bg);">75%</div>
    </div>
  </section>
  
  <section class="demo-section">
    <h2>Button</h2>
    <div class="component-grid">
      <!-- Default variant -->
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">default</span>
        <garden-button>Button</garden-button>
        <garden-button size="sm">Small</garden-button>
        <garden-button size="lg">Large</garden-button>
        <garden-button disabled>Disabled</garden-button>
      </div>

      <!-- Ghost variant -->
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">ghost</span>
        <garden-button variant="ghost">Ghost</garden-button>
        <garden-button variant="ghost" size="sm">Small</garden-button>
        <garden-button variant="ghost" size="lg">Large</garden-button>
        <garden-button variant="ghost" disabled>Disabled</garden-button>
      </div>

      <!-- Solid variant -->
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">solid</span>
        <garden-button variant="solid">Solid</garden-button>
        <garden-button variant="solid" size="sm">Small</garden-button>
        <garden-button variant="solid" size="lg">Large</garden-button>
        <garden-button variant="solid" disabled>Disabled</garden-button>
      </div>
    </div>

    <!-- Full width example -->
    <div style="margin-top: var(--garden-space-4); max-width: 300px;">
      <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">full width</span>
      <garden-button full style="margin-top: var(--garden-space-2);">Full Width Button</garden-button>
    </div>
  </section>

  <section class="demo-section">
    <h2>Input</h2>
    <div class="component-grid">
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-3); min-width: 250px;">
        <div>
          <label style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-1); color: var(--garden-fg-muted);">text input</label>
          <garden-input placeholder="Enter text..."></garden-input>
        </div>
        <div>
          <label style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-1); color: var(--garden-fg-muted);">email</label>
          <garden-input type="email" placeholder="you@example.com"></garden-input>
        </div>
        <div>
          <label style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-1); color: var(--garden-fg-muted);">password</label>
          <garden-input type="password" placeholder="********"></garden-input>
        </div>
      </div>
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-3); min-width: 250px;">
        <div>
          <label style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-1); color: var(--garden-fg-muted);">small</label>
          <garden-input size="sm" placeholder="Small input"></garden-input>
        </div>
        <div>
          <label style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-1); color: var(--garden-fg-muted);">large</label>
          <garden-input size="lg" placeholder="Large input"></garden-input>
        </div>
        <div>
          <label style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-1); color: var(--garden-fg-muted);">disabled</label>
          <garden-input disabled value="Cannot edit"></garden-input>
        </div>
        <div>
          <label style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-1); color: var(--garden-fg-muted);">readonly</label>
          <garden-input readonly value="Read only content"></garden-input>
        </div>
      </div>
    </div>
  </section>

  <section class="demo-section">
    <h2>Checkbox</h2>
    <div class="component-grid">
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-3);">
        <garden-checkbox name="terms">Accept terms and conditions</garden-checkbox>
        <garden-checkbox name="newsletter" checked>Subscribe to newsletter</garden-checkbox>
        <garden-checkbox name="disabled-example" disabled>Disabled checkbox</garden-checkbox>
        <garden-checkbox name="disabled-checked" disabled checked>Disabled checked</garden-checkbox>
      </div>
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-3);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">form example</span>
        <form onsubmit="event.preventDefault(); alert('Form submitted: ' + JSON.stringify(Object.fromEntries(new FormData(event.target))));">
          <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
            <garden-checkbox name="feature-a" value="feature-a">Feature A</garden-checkbox>
            <garden-checkbox name="feature-b" value="feature-b">Feature B</garden-checkbox>
            <garden-checkbox name="feature-c" value="feature-c">Feature C</garden-checkbox>
            <garden-button type="submit" style="margin-top: var(--garden-space-2);">Submit</garden-button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <section class="demo-section">
    <h2>Radio</h2>
    <div class="component-grid">
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-3);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">color selection</span>
        <garden-radio name="color" value="red">Red</garden-radio>
        <garden-radio name="color" value="green" checked>Green</garden-radio>
        <garden-radio name="color" value="blue">Blue</garden-radio>
      </div>
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-3);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">size selection</span>
        <garden-radio name="size" value="sm">Small</garden-radio>
        <garden-radio name="size" value="md" checked>Medium</garden-radio>
        <garden-radio name="size" value="lg">Large</garden-radio>
      </div>
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-3);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">disabled</span>
        <garden-radio name="disabled" value="a" disabled>Option A</garden-radio>
        <garden-radio name="disabled" value="b" disabled checked>Option B (selected)</garden-radio>
      </div>
    </div>
  </section>

  <section class="demo-section">
    <h2>Card</h2>
    <div class="component-grid">
      <!-- Static card -->
      <garden-card style="width: 200px;">
        <span slot="header">Card Title</span>
        <p style="margin: 0;">Card content goes here. Simple container.</p>
      </garden-card>

      <!-- Clickable card -->
      <garden-card clickable style="width: 200px;" onclick="alert('Card clicked!')">
        <span slot="header">Clickable</span>
        <p style="margin: 0;">Click me for interaction.</p>
        <span slot="footer" style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">footer content</span>
      </garden-card>

      <!-- Link card -->
      <garden-card href="https://are.na" target="_blank" style="width: 200px;">
        <span slot="header">Link Card</span>
        <p style="margin: 0;">Opens Are.na in new tab</p>
      </garden-card>
    </div>
  </section>

  <section class="demo-section">
    <h2>Modal</h2>
    <div class="component-grid">
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">sizes</span>
        <garden-button onclick="document.getElementById('modal-sm').show()">Small Modal</garden-button>
        <garden-button onclick="document.getElementById('modal-md').show()">Medium Modal</garden-button>
        <garden-button onclick="document.getElementById('modal-lg').show()">Large Modal</garden-button>
      </div>
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">use cases</span>
        <garden-button onclick="document.getElementById('modal-confirm').show()">Confirmation</garden-button>
        <garden-button onclick="document.getElementById('modal-notification').show()">Notification</garden-button>
      </div>
    </div>

    <!-- Small modal -->
    <garden-modal id="modal-sm" size="sm">
      <span slot="header">Small Modal</span>
      <p style="margin: 0;">This is a small modal for compact content.</p>
      <span slot="footer">
        <garden-button variant="ghost" onclick="document.getElementById('modal-sm').close()">Close</garden-button>
      </span>
    </garden-modal>

    <!-- Medium modal (default) -->
    <garden-modal id="modal-md">
      <span slot="header">Medium Modal</span>
      <p style="margin: 0 0 var(--garden-space-3) 0;">This is the default medium-sized modal. It's suitable for most dialog content like forms, confirmations, and information displays.</p>
      <p style="margin: 0;">The dithered backdrop creates a distinct visual separation while maintaining the design system aesthetic.</p>
      <span slot="footer">
        <garden-button variant="ghost" onclick="document.getElementById('modal-md').close()">Cancel</garden-button>
        <garden-button onclick="document.getElementById('modal-md').close()">Confirm</garden-button>
      </span>
    </garden-modal>

    <!-- Large modal -->
    <garden-modal id="modal-lg" size="lg">
      <span slot="header">Large Modal</span>
      <p style="margin: 0 0 var(--garden-space-3) 0;">Large modals are useful for complex content that needs more space, like detailed forms or content previews.</p>
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-3);">
        <garden-input placeholder="Enter something..."></garden-input>
        <garden-input placeholder="Another field..."></garden-input>
        <div style="display: flex; gap: var(--garden-space-3);">
          <garden-checkbox>Option A</garden-checkbox>
          <garden-checkbox>Option B</garden-checkbox>
        </div>
      </div>
      <span slot="footer">
        <garden-button variant="ghost" onclick="document.getElementById('modal-lg').close()">Cancel</garden-button>
        <garden-button onclick="document.getElementById('modal-lg').close()">Save</garden-button>
      </span>
    </garden-modal>

    <!-- Confirmation modal -->
    <garden-modal id="modal-confirm" size="sm">
      <span slot="header">Confirm Action</span>
      <p style="margin: 0;">Are you sure you want to proceed? This action cannot be undone.</p>
      <span slot="footer">
        <garden-button variant="ghost" onclick="document.getElementById('modal-confirm').close()">Cancel</garden-button>
        <garden-button onclick="document.getElementById('modal-confirm').close(); alert('Confirmed!')">Yes, proceed</garden-button>
      </span>
    </garden-modal>

    <!-- Notification modal -->
    <garden-modal id="modal-notification" size="sm" close-on-backdrop="false">
      <span slot="header">Notification</span>
      <p style="margin: 0;">Your changes have been saved successfully.</p>
      <span slot="footer">
        <garden-button onclick="document.getElementById('modal-notification').close()">OK</garden-button>
      </span>
    </garden-modal>
  </section>

  <section class="demo-section">
    <h2>Block (Strudel)</h2>
    <p style="font-size: var(--garden-text-sm); color: var(--garden-fg-muted); margin-bottom: var(--garden-space-4);">
      Click play to start the pattern. Patterns need <code>.play()</code> at the end.
    </p>
    <div style="max-width: 500px;">
      <div style="margin-bottom: var(--garden-space-4);">
        <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">simple notes</span>
        <garden-block code='note("c3 e3 g3 c4").slow(2).play()'></garden-block>
      </div>
      <div style="margin-bottom: var(--garden-space-4);">
        <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">drum pattern</span>
        <garden-block code='s("bd sd [bd bd] sd").play()'></garden-block>
      </div>
      <div>
        <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">readonly example</span>
        <garden-block readonly code='note("c2 [e3 g3] c4 [g3 e3]")
  .s("sawtooth")
  .cutoff(800)
  .play()'></garden-block>
      </div>
    </div>
  </section>

  <section class="demo-section">
    <h2>Waveform Visualizer</h2>
    <p style="font-size: var(--garden-text-sm); color: var(--garden-fg-muted); margin-bottom: var(--garden-space-4);">
      Fixed at bottom-right. Solid bars show current amplitude, dithered ghosts show peak hold.
    </p>
    <div class="component-grid">
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
        <garden-button onclick="document.getElementById('waveform-demo').playing = !document.getElementById('waveform-demo').playing">
          Toggle Demo Mode
        </garden-button>
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">
          Click visualizer or button to toggle
        </span>
      </div>
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">bar count</span>
        <div style="display: flex; gap: var(--garden-space-2);">
          <garden-button size="sm" onclick="document.getElementById('waveform-demo').bars = 8">8</garden-button>
          <garden-button size="sm" onclick="document.getElementById('waveform-demo').bars = 16">16</garden-button>
          <garden-button size="sm" onclick="document.getElementById('waveform-demo').bars = 24">24</garden-button>
        </div>
      </div>
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">style</span>
        <garden-checkbox id="borderless-toggle">Borderless</garden-checkbox>
      </div>
    </div>
  </section>

  <section class="demo-section">
    <h2>Breadcrumb Navigation</h2>
    <p style="font-size: var(--garden-text-sm); color: var(--garden-fg-muted); margin-bottom: var(--garden-space-4);">
      Minimal dot-based navigation history. Hollow circles for inactive, dithered fill for active. Hover over ellipsis to reveal hidden pages.
    </p>
    <div style="display: flex; flex-direction: column; gap: var(--garden-space-6);">
      <!-- Basic breadcrumb -->
      <div>
        <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">short history (3 items)</span>
        <garden-breadcrumb id="breadcrumb-short"></garden-breadcrumb>
      </div>

      <!-- Longer breadcrumb -->
      <div>
        <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">medium history (6 items)</span>
        <garden-breadcrumb id="breadcrumb-medium"></garden-breadcrumb>
      </div>

      <!-- Truncated breadcrumb -->
      <div>
        <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">truncated history (12 items, max 8 visible)</span>
        <garden-breadcrumb id="breadcrumb-long" max-visible="8"></garden-breadcrumb>
      </div>

      <!-- Interactive demo -->
      <div>
        <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">interactive (click dots, add/remove pages)</span>
        <div style="display: flex; gap: var(--garden-space-4); align-items: center; margin-bottom: var(--garden-space-2);">
          <garden-button size="sm" onclick="addPage()">Add Page</garden-button>
          <garden-button size="sm" variant="ghost" onclick="removePage()">Remove Page</garden-button>
          <span id="breadcrumb-status" style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);"></span>
        </div>
        <garden-breadcrumb id="breadcrumb-interactive"></garden-breadcrumb>
      </div>
    </div>
  </section>

  <section class="demo-section">
    <h2>Tooltip</h2>
    <p style="font-size: var(--garden-text-sm); color: var(--garden-fg-muted); margin-bottom: var(--garden-space-4);">
      Wrapper component for hover hints. Hover over buttons to see tooltips.
    </p>
    <div class="component-grid">
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-3);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">positions</span>
        <div style="display: flex; gap: var(--garden-space-4); flex-wrap: wrap;">
          <garden-tooltip text="Above the button" position="top">
            <garden-button size="sm">Top</garden-button>
          </garden-tooltip>
          <garden-tooltip text="Below the button" position="bottom">
            <garden-button size="sm">Bottom</garden-button>
          </garden-tooltip>
          <garden-tooltip text="Left side" position="left">
            <garden-button size="sm">Left</garden-button>
          </garden-tooltip>
          <garden-tooltip text="Right side" position="right">
            <garden-button size="sm">Right</garden-button>
          </garden-tooltip>
        </div>
      </div>
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-3);">
        <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">with hint text</span>
        <div style="display: flex; gap: var(--garden-space-4);">
          <garden-tooltip text="Edit block" hint="⌘E">
            <garden-button size="sm">Edit</garden-button>
          </garden-tooltip>
          <garden-tooltip text="Delete block" hint="⌫">
            <garden-button size="sm" variant="ghost">Delete</garden-button>
          </garden-tooltip>
        </div>
      </div>
    </div>
  </section>

  <section class="demo-section">
    <h2>Links</h2>
    <p style="font-size: var(--garden-text-sm); color: var(--garden-fg-muted); margin-bottom: var(--garden-space-4);">
      Dimmed text that underlines on hover. Use <code>.garden-link</code> class.
    </p>
    <div style="max-width: 500px;">
      <p style="margin: 0 0 var(--garden-space-3) 0;">
        This block was connected from <a href="#" class="garden-link">Design Systems</a> channel
        and is also in <a href="#" class="garden-link">Typography Research</a>.
      </p>
      <p style="margin: 0; font-size: var(--garden-text-sm);">
        Source: <a href="https://are.na" class="garden-link" target="_blank">are.na</a> ·
        Added by <a href="#" class="garden-link">@user</a> ·
        <a href="#" class="garden-link">View history</a>
      </p>
    </div>
  </section>

  <section class="demo-section">
    <h2>Context Menu</h2>
    <p style="font-size: var(--garden-text-sm); color: var(--garden-fg-muted); margin-bottom: var(--garden-space-4);">
      Right-click or hover for menu button. Keyboard navigation with ↑↓, Enter, Esc.
    </p>
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--garden-space-4); max-width: 600px;">
      <garden-card show-menu menu-context="block-1" clickable>
        <span slot="header">Commit Mono</span>
        <p style="margin: 0;">Monospace typeface exploration.</p>
        <span slot="footer">Text · 2d ago</span>
      </garden-card>
      <garden-card show-menu menu-context="block-2" clickable>
        <span slot="header">Dither Patterns</span>
        <p style="margin: 0;">PC-98 inspired textures.</p>
        <span slot="footer">Image · 5d ago</span>
      </garden-card>
      <garden-card show-menu menu-context="block-3" clickable>
        <span slot="header">Farrow & Ball</span>
        <p style="margin: 0;">Color palette reference.</p>
        <span slot="footer">Link · 1w ago</span>
      </garden-card>
    </div>
    <p style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted); margin-top: var(--garden-space-3);">
      <span id="context-menu-status">Hover over cards to see ··· button, or right-click</span>
    </p>
  </section>

  <!-- Context menu (positioned dynamically) -->
  <garden-context-menu id="context-menu-demo"></garden-context-menu>

  <!-- Connections modal -->
  <garden-connections-modal id="connections-modal-demo"></garden-connections-modal>

  <section class="demo-section">
    <h2>Waypoint</h2>
    <p style="font-size: var(--garden-text-sm); color: var(--garden-fg-muted); margin-bottom: var(--garden-space-4);">
      Navigation modal for wandering without getting lost. Press <code>⌘/</code> or click button to open.
    </p>
    <div class="component-grid">
      <garden-button onclick="document.getElementById('waypoint-demo').show()">Open Waypoint</garden-button>
      <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted); align-self: center;">
        or press ⌘/ (Ctrl+/ on Windows)
      </span>
    </div>
  </section>

  <!-- Waypoint component (hidden until opened) -->
  <garden-waypoint id="waypoint-demo"></garden-waypoint>

  <section class="demo-section">
    <h2>Grid</h2>
    <p style="font-size: var(--garden-text-sm); color: var(--garden-fg-muted); margin-bottom: var(--garden-space-4);">
      Paginated content grid with responsive columns. No infinite scroll - intentional pagination.
    </p>

    <!-- Basic grid with cards -->
    <div style="margin-bottom: var(--garden-space-6);">
      <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">responsive auto-fit (resize window to see columns adjust)</span>
      <garden-grid id="grid-demo" page-size="8" total="24">
        <!-- Items will be added via JS -->
      </garden-grid>
    </div>

    <!-- Fixed columns -->
    <div style="margin-bottom: var(--garden-space-6);">
      <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">fixed 3 columns with footers</span>
      <garden-grid columns="3" gap="var(--garden-space-2)" hide-pagination>
        <garden-card>
          <span slot="header">Research Notes</span>
          <p style="margin: 0;">Collection of design references and inspiration.</p>
          <span slot="footer">12 blocks · updated 2h ago</span>
        </garden-card>
        <garden-card>
          <span slot="header">Typography</span>
          <p style="margin: 0;">Monospace fonts and type hierarchies.</p>
          <span slot="footer">8 blocks · updated 1d ago</span>
        </garden-card>
        <garden-card>
          <span slot="header">Color Theory</span>
          <p style="margin: 0;">Farrow & Ball palette explorations.</p>
          <span slot="footer">24 blocks · updated 3d ago</span>
        </garden-card>
        <garden-card>
          <span slot="header">PC-98 Archive</span>
          <p style="margin: 0;">Screenshots and visual references.</p>
          <span slot="footer">156 blocks · updated 1w ago</span>
        </garden-card>
        <garden-card>
          <span slot="header">Audio Patterns</span>
          <p style="margin: 0;">Strudel experiments and samples.</p>
          <span slot="footer">7 blocks · updated 2w ago</span>
        </garden-card>
        <garden-card>
          <span slot="header">Reading List</span>
          <p style="margin: 0;">Articles and essays to revisit.</p>
          <span slot="footer">42 blocks · updated 1mo ago</span>
        </garden-card>
      </garden-grid>
    </div>

    <!-- Empty state -->
    <div style="margin-bottom: var(--garden-space-6);">
      <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">empty state</span>
      <garden-grid total="0">
        <div slot="empty">
          <p style="margin: 0 0 var(--garden-space-2) 0;">This channel is empty</p>
          <garden-button size="sm">Add first block</garden-button>
        </div>
      </garden-grid>
    </div>

    <!-- Loading state -->
    <div style="margin-bottom: var(--garden-space-6);">
      <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">loading state</span>
      <div style="display: flex; gap: var(--garden-space-2); margin-bottom: var(--garden-space-2);">
        <garden-button size="sm" onclick="document.getElementById('grid-loading').loading = !document.getElementById('grid-loading').loading">
          Toggle Loading
        </garden-button>
      </div>
      <garden-grid id="grid-loading" columns="4" hide-pagination>
        <garden-card>
          <span slot="header">Sketch 01</span>
          <p style="margin: 0;">Early explorations.</p>
          <span slot="footer">Image · 5d ago</span>
        </garden-card>
        <garden-card>
          <span slot="header">Sketch 02</span>
          <p style="margin: 0;">Refined concepts.</p>
          <span slot="footer">Image · 4d ago</span>
        </garden-card>
        <garden-card>
          <span slot="header">Notes</span>
          <p style="margin: 0;">Process documentation.</p>
          <span slot="footer">Text · 3d ago</span>
        </garden-card>
        <garden-card>
          <span slot="header">Reference</span>
          <p style="margin: 0;">External inspiration.</p>
          <span slot="footer">Link · 2d ago</span>
        </garden-card>
      </garden-grid>
    </div>

    <!-- Fill with placeholders -->
    <div>
      <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">fixed 3 columns, fill to 6 (4 items + 2 placeholders)</span>
      <garden-grid columns="3" fill="6" hide-pagination>
        <garden-card>
          <span slot="header">Draft 1</span>
          <p style="margin: 0;">Initial concept.</p>
          <span slot="footer">Text · 1d ago</span>
        </garden-card>
        <garden-card>
          <span slot="header">Draft 2</span>
          <p style="margin: 0;">Revised approach.</p>
          <span slot="footer">Text · 12h ago</span>
        </garden-card>
        <garden-card>
          <span slot="header">Sketch</span>
          <p style="margin: 0;">Visual exploration.</p>
          <span slot="footer">Image · 6h ago</span>
        </garden-card>
        <garden-card>
          <span slot="header">Reference</span>
          <p style="margin: 0;">External link.</p>
          <span slot="footer">Link · 2h ago</span>
        </garden-card>
      </garden-grid>
    </div>
  </section>

  <section class="demo-section">
    <h2>Media Blocks</h2>
    <p style="font-size: var(--garden-text-sm); color: var(--garden-fg-muted); margin-bottom: var(--garden-space-4);">
      Image, video, and audio components for media content. Designed for Tauri's asset:// protocol, but works with any URLs.
    </p>

    <!-- Image Block -->
    <div style="margin-bottom: var(--garden-space-6);">
      <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">image block (gallery treatment)</span>
      <p style="font-size: var(--garden-text-sm); color: var(--garden-fg-muted); margin: 0 0 var(--garden-space-4) 0;">
        Click image or press <kbd>F</kbd> for gallery fullscreen, <kbd>Shift+F</kbd> for immersive, <kbd>Esc</kbd> to exit.
      </p>
      <div class="component-grid">
        <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
          <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">with caption plaque</span>
          <garden-image-block
            src="https://picsum.photos/800/600"
            alt="Untitled landscape study"
            width="800"
            height="600"
            style="width: 250px;"
          ></garden-image-block>
        </div>
        <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
          <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">dimensions only</span>
          <garden-image-block
            src="https://picsum.photos/seed/garden/400/300"
            width="400"
            height="300"
            style="width: 200px;"
          ></garden-image-block>
        </div>
        <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
          <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">hidden caption</span>
          <garden-image-block
            src="https://picsum.photos/seed/pc98/600/400"
            alt="PC-98 palette study"
            width="600"
            height="400"
            hide-caption
            style="width: 200px;"
          ></garden-image-block>
        </div>
        <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
          <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">clickable (custom action)</span>
          <garden-image-block
            src="https://picsum.photos/seed/click/400/300"
            alt="Interactive piece"
            width="400"
            height="300"
            clickable
            style="width: 200px;"
          ></garden-image-block>
        </div>
      </div>

      <!-- Gallery showcase -->
      <div style="margin-top: var(--garden-space-6);">
        <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">gallery wall (constrained)</span>
        <div style="display: flex; gap: var(--garden-space-4); flex-wrap: wrap;">
          <garden-image-block
            src="https://picsum.photos/seed/art1/1200/800"
            alt="Coastal memory, early morning"
            width="1200"
            height="800"
            constrained
            style="width: 300px;"
          ></garden-image-block>
          <garden-image-block
            src="https://picsum.photos/seed/art2/800/1200"
            alt="Vertical study in blue"
            width="800"
            height="1200"
            constrained
            style="width: 200px;"
          ></garden-image-block>
          <garden-image-block
            src="https://picsum.photos/seed/art3/1000/1000"
            alt="Square composition"
            width="1000"
            height="1000"
            constrained
            style="width: 200px;"
          ></garden-image-block>
        </div>
      </div>

      <!-- Error state -->
      <div style="margin-top: var(--garden-space-6);">
        <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">error state</span>
        <garden-image-block
          src="https://invalid-url-that-will-fail.com/image.jpg"
          alt="Failed to load"
          width="400"
          height="300"
          style="width: 200px;"
        ></garden-image-block>
      </div>
    </div>

    <!-- Video Block -->
    <div style="margin-bottom: var(--garden-space-6);">
      <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">video block</span>
      <div class="component-grid">
        <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
          <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">default (click to play)</span>
          <garden-video-block
            src="https://www.w3schools.com/html/mov_bbb.mp4"
            poster="https://picsum.photos/seed/video/400/225"
            duration="10"
            style="width: 300px;"
          ></garden-video-block>
        </div>
        <div style="display: flex; flex-direction: column; gap: var(--garden-space-2);">
          <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">muted autoplay loop</span>
          <garden-video-block
            src="https://www.w3schools.com/html/mov_bbb.mp4"
            autoplay
            muted
            loop
            style="width: 200px;"
          ></garden-video-block>
        </div>
      </div>
    </div>

    <!-- Audio Block -->
    <div style="margin-bottom: var(--garden-space-6);">
      <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">audio block</span>
      <div style="display: flex; flex-direction: column; gap: var(--garden-space-4); max-width: 400px;">
        <div>
          <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">default with metadata</span>
          <garden-audio-block
            src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
            track-title="SoundHelix Song 1"
            artist="SoundHelix"
            duration="371"
            style="margin-top: var(--garden-space-2);"
          ></garden-audio-block>
        </div>
        <div>
          <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">compact variant</span>
          <garden-audio-block
            src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"
            track-title="SoundHelix Song 2"
            artist="SoundHelix"
            compact
            style="margin-top: var(--garden-space-2);"
          ></garden-audio-block>
        </div>
        <div>
          <span style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted);">without metadata (filename fallback)</span>
          <garden-audio-block
            src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"
            style="margin-top: var(--garden-space-2);"
          ></garden-audio-block>
        </div>
      </div>
    </div>

    <!-- Event logging -->
    <div>
      <span style="font-size: var(--garden-text-xs); display: block; margin-bottom: var(--garden-space-2); color: var(--garden-fg-muted);">event log</span>
      <div id="media-event-log" style="font-size: var(--garden-text-xs); color: var(--garden-fg-muted); padding: var(--garden-space-2); border: 1px solid var(--garden-fg-muted); min-height: 60px; max-height: 120px; overflow-y: auto;">
        Interact with media components to see events...
      </div>
    </div>
  </section>

  <script type="module">
    // Media event logging
    const mediaLog = document.getElementById('media-event-log');
    const logEvent = (type, detail) => {
      const time = new Date().toLocaleTimeString();
      const line = document.createElement('div');
      line.textContent = `[${time}] ${type}: ${JSON.stringify(detail).slice(0, 80)}`;
      mediaLog.appendChild(line);
      mediaLog.scrollTop = mediaLog.scrollHeight;
    };

    // Listen for media events
    document.querySelectorAll('garden-image-block, garden-video-block, garden-audio-block').forEach(el => {
      ['garden:load', 'garden:error', 'garden:play', 'garden:pause', 'garden:ended', 'garden:click', 'garden:fullscreen'].forEach(event => {
        el.addEventListener(event, (e) => logEvent(event.replace('garden:', ''), e.detail || {}));
      });
    });

    // Handle clickable image custom action
    document.querySelectorAll('garden-image-block[clickable]').forEach(el => {
      el.addEventListener('garden:click', (e) => {
        alert('Custom click action: ' + (e.detail?.src || 'image'));
      });
    });
  </script>

  <!-- Waveform visualizer (fixed position) -->
  <garden-waveform
    id="waveform-demo"
    bars="16"
    @garden:click="${(e) => e.target.playing = !e.target.playing}"
  ></garden-waveform>

  <script type="module">
    import { GardenBlock } from '../src/components/garden-block.ts';

    const waveform = document.getElementById('waveform-demo');
    let activeBlocks = 0;

    // Make waveform clickable to toggle demo mode
    waveform.addEventListener('garden:click', function(e) {
      if (activeBlocks === 0) {
        this.playing = !this.playing;
      }
    });

    // Borderless toggle
    document.getElementById('borderless-toggle').addEventListener('garden:change', function(e) {
      waveform.borderless = e.detail.checked;
    });

    // Connect waveform to Strudel audio when any block starts playing
    document.querySelectorAll('garden-block').forEach(block => {
      block.addEventListener('garden:play', () => {
        activeBlocks++;

        // Try to get the analyser from GardenBlock
        const analyser = GardenBlock.getAnalyser();
        if (analyser) {
          console.log('Connecting analyser to waveform');
          waveform.connectAnalyser(analyser);
        } else {
          console.log('No analyser available, using demo mode');
          // Clear analyser to use demo mode
          waveform.analyser = null;
        }
        waveform.playing = true;
      });

      block.addEventListener('garden:stop', () => {
        activeBlocks = Math.max(0, activeBlocks - 1);
        if (activeBlocks === 0) {
          waveform.playing = false;
        }
      });

      block.addEventListener('garden:strudel-ready', (e) => {
        console.log('Strudel ready:', e.detail);
        if (e.detail.analyser) {
          waveform.connectAnalyser(e.detail.analyser);
        }
      });
    });
  </script>

  <script type="module">
    // Import all components
    import '../src/components/garden-button.ts';
    import '../src/components/garden-input.ts';
    import '../src/components/garden-checkbox.ts';
    import '../src/components/garden-radio.ts';
    import '../src/components/garden-card.ts';
    import '../src/components/garden-modal.ts';
    import '../src/components/garden-waveform.ts';
    import '../src/components/garden-block.ts';
    import '../src/components/garden-breadcrumb.ts';
    import '../src/components/garden-grid.ts';
    import '../src/components/garden-placeholder.ts';
    import '../src/components/garden-tooltip.ts';
    import '../src/components/garden-waypoint.ts';
    import '../src/components/garden-context-menu.ts';
    import '../src/components/garden-connections-modal.ts';
    import '../src/components/garden-image-block.ts';
    import '../src/components/garden-video-block.ts';
    import '../src/components/garden-audio-block.ts';
  </script>
  
  <script>
    function toggleTheme() {
      const html = document.documentElement;
      const current = html.getAttribute('data-theme');
      html.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark');
    }

    // Breadcrumb demo data
    const shortHistory = [
      { id: 'home', title: 'Home', type: 'home' },
      { id: 'channel-1', title: 'Research Notes', type: 'channel' },
      { id: 'block-1', title: 'PC-98 Color Theory', type: 'block' }
    ];

    const mediumHistory = [
      { id: 'home', title: 'Home', type: 'home' },
      { id: 'channel-1', title: 'Design Systems', type: 'channel' },
      { id: 'block-1', title: 'Dither Patterns', type: 'block' },
      { id: 'channel-2', title: 'Typography', type: 'channel' },
      { id: 'block-2', title: 'Commit Mono', type: 'block' },
      { id: 'page-1', title: 'Settings', type: 'page' }
    ];

    const longHistory = [
      { id: 'home', title: 'Home', type: 'home' },
      { id: 'channel-1', title: 'Archives', type: 'channel' },
      { id: 'block-1', title: 'Vintage Computing', type: 'block' },
      { id: 'channel-2', title: 'Japanese Design', type: 'channel' },
      { id: 'block-2', title: 'PC-98 Screenshots', type: 'block' },
      { id: 'channel-3', title: 'Color Theory', type: 'channel' },
      { id: 'block-3', title: 'Warm Neutrals', type: 'block' },
      { id: 'channel-4', title: 'Web Components', type: 'channel' },
      { id: 'block-4', title: 'Lit Examples', type: 'block' },
      { id: 'channel-5', title: 'Audio', type: 'channel' },
      { id: 'block-5', title: 'Strudel Patterns', type: 'block' },
      { id: 'page-1', title: 'Current Page', type: 'page' }
    ];

    // Interactive demo state
    let interactiveHistory = [
      { id: 'home', title: 'Home', type: 'home' },
      { id: 'page-1', title: 'Page 1', type: 'page' }
    ];
    let pageCounter = 1;

    function addPage() {
      pageCounter++;
      interactiveHistory.push({
        id: 'page-' + pageCounter,
        title: 'Page ' + pageCounter,
        type: 'page'
      });
      updateInteractiveBreadcrumb();
    }

    function removePage() {
      if (interactiveHistory.length > 1) {
        interactiveHistory.pop();
        updateInteractiveBreadcrumb();
      }
    }

    function updateInteractiveBreadcrumb() {
      const bc = document.getElementById('breadcrumb-interactive');
      bc.items = [...interactiveHistory];
    }

    // Initialize breadcrumbs after components load
    customElements.whenDefined('garden-breadcrumb').then(() => {
      document.getElementById('breadcrumb-short').items = shortHistory;
      document.getElementById('breadcrumb-medium').items = mediumHistory;
      document.getElementById('breadcrumb-long').items = longHistory;
      document.getElementById('breadcrumb-interactive').items = [...interactiveHistory];

      // Listen for navigation events
      document.querySelectorAll('garden-breadcrumb').forEach(bc => {
        bc.addEventListener('garden:navigate', (e) => {
          const status = document.getElementById('breadcrumb-status');
          status.textContent = 'Navigated to: ' + e.detail.item.title + ' (index ' + e.detail.index + ')';

          // For interactive demo, update active state
          if (bc.id === 'breadcrumb-interactive') {
            bc.active = e.detail.index;
          }
        });
      });
    });

    // Grid demo data - 24 items total
    const gridItems = Array.from({ length: 24 }, (_, i) => ({
      id: i + 1,
      title: `Block ${i + 1}`,
      type: i % 3 === 0 ? 'Image' : i % 3 === 1 ? 'Text' : 'Link'
    }));

    // Render grid items for current page
    function renderGridItems(page, pageSize) {
      const grid = document.getElementById('grid-demo');
      const start = (page - 1) * pageSize;
      const end = start + pageSize;
      const items = gridItems.slice(start, end);

      grid.innerHTML = items.map(item => `
        <garden-card>
          <span slot="header">${item.title}</span>
          <p style="margin: 0;">Sample content for this ${item.type.toLowerCase()} block.</p>
          <span slot="footer">${item.type} · ${Math.floor(Math.random() * 30) + 1}d ago</span>
        </garden-card>
      `).join('');
    }

    // Initialize context menu demo
    customElements.whenDefined('garden-context-menu').then(() => {
      const contextMenu = document.getElementById('context-menu-demo');
      const statusEl = document.getElementById('context-menu-status');

      // Block context menu items
      const blockMenuItems = [
        { id: 'connect', label: 'Connect to...', icon: '→' },
        { id: 'sep1', separator: true },
        { id: 'view-connections', label: 'View connections', icon: '→' },
        { id: 'go-to-source', label: 'Go to source' },
        { id: 'sep2', separator: true },
        { id: 'edit', label: 'Edit', shortcut: '⌘E' },
        { id: 'copy-link', label: 'Copy link', shortcut: '⌘L' },
        { id: 'sep3', separator: true },
        { id: 'remove', label: 'Remove from channel' },
        { id: 'delete', label: 'Delete block', destructive: true, icon: '⚠' }
      ];

      contextMenu.items = blockMenuItems;

      // Listen for menu-open events from cards
      document.querySelectorAll('garden-card[show-menu]').forEach(card => {
        card.addEventListener('garden:menu-open', (e) => {
          contextMenu.x = e.detail.x;
          contextMenu.y = e.detail.y;
          contextMenu.context = {
            type: 'block',
            id: e.detail.context,
            title: card.querySelector('[slot="header"]')?.textContent || 'Block'
          };
          contextMenu.open = true;
          statusEl.textContent = `Menu opened for: ${contextMenu.context.title}`;
        });
      });

      // Listen for menu selection
      contextMenu.addEventListener('garden:menu-select', (e) => {
        statusEl.textContent = `Selected: "${e.detail.itemId}" on "${e.detail.context?.title || 'unknown'}"`;

        // Handle specific actions
        if (e.detail.itemId === 'delete') {
          alert(`This would confirm deletion of "${e.detail.context?.title}"`);
        } else if (e.detail.itemId === 'connect') {
          // Open waypoint in connect mode
          const waypoint = document.getElementById('waypoint-demo');
          waypoint.mode = 'connect';
          waypoint.connectTarget = {
            id: e.detail.context?.id,
            title: e.detail.context?.title || 'Block',
            type: 'block'
          };
          waypoint.show();
          statusEl.textContent = `Opening waypoint to connect "${e.detail.context?.title}"...`;
        } else if (e.detail.itemId === 'view-connections') {
          // Open connections modal
          const connectionsModal = document.getElementById('connections-modal-demo');
          connectionsModal.blockId = e.detail.context?.id;
          connectionsModal.blockTitle = e.detail.context?.title || 'Block';
          // Demo connections data
          connectionsModal.connections = [
            { channelId: 'typography', channelTitle: 'Typography Research', isSource: true },
            { channelId: 'design-systems', channelTitle: 'Design Systems' },
            { channelId: 'pc98-archive', channelTitle: 'PC-98 Archive' }
          ];
          connectionsModal.show();
          statusEl.textContent = `Viewing connections for "${e.detail.context?.title}"`;
        }
      });

      contextMenu.addEventListener('garden:menu-close', () => {
        // Menu closed
      });

      // Connections modal events
      const connectionsModal = document.getElementById('connections-modal-demo');

      connectionsModal.addEventListener('garden:navigate', (e) => {
        console.log('Navigate from connections:', e.detail);
        statusEl.textContent = `Navigating to channel: ${e.detail.title}`;
        alert(`Would navigate to channel: ${e.detail.title}`);
      });

      connectionsModal.addEventListener('garden:disconnect', (e) => {
        console.log('Disconnect:', e.detail);
        statusEl.textContent = `Removed "${e.detail.blockTitle}" from "${e.detail.channelTitle}"`;
        if (e.detail.isLastConnection) {
          alert(`Block "${e.detail.blockTitle}" is now unconnected`);
        }
      });

      connectionsModal.addEventListener('garden:connect-request', (e) => {
        console.log('Connect request from modal:', e.detail);
        // Open waypoint in connect mode
        const waypoint = document.getElementById('waypoint-demo');
        waypoint.mode = 'connect';
        waypoint.connectTarget = {
          id: e.detail.blockId,
          title: e.detail.blockTitle,
          type: 'block'
        };
        waypoint.show();
        statusEl.textContent = `Opening waypoint to connect "${e.detail.blockTitle}"...`;
      });
    });

    // Initialize waypoint demo
    customElements.whenDefined('garden-waypoint').then(() => {
      const waypoint = document.getElementById('waypoint-demo');

      // Demo data
      waypoint.history = [
        { id: 'home', title: 'Home', type: 'home' },
        { id: 'design-systems', title: 'Design Systems', type: 'channel' },
        { id: 'typography', title: 'Typography', type: 'channel' },
        { id: 'commit-mono', title: 'Commit Mono', type: 'block' }
      ];

      waypoint.connections = [
        { channelId: 'color-theory', channelTitle: 'Color Theory', sharedBlockCount: 3 },
        { channelId: 'pc98-archive', channelTitle: 'PC-98 Archive', sharedBlockCount: 1 },
        { channelId: 'web-components', channelTitle: 'Web Components', sharedBlockCount: 5 }
      ];

      waypoint.recent = [
        { id: 'audio-patterns', title: 'Audio Patterns', type: 'channel', visitedAt: new Date(Date.now() - 2 * 3600000).toISOString() },
        { id: 'research-notes', title: 'Research Notes', type: 'channel', visitedAt: new Date(Date.now() - 24 * 3600000).toISOString() },
        { id: 'strudel-experiments', title: 'Strudel Experiments', type: 'channel', visitedAt: new Date(Date.now() - 3 * 24 * 3600000).toISOString() },
        { id: 'dither-patterns', title: 'Dither Patterns', type: 'block', visitedAt: new Date(Date.now() - 5 * 24 * 3600000).toISOString() }
      ];

      waypoint.searchIndex = [
        { id: 'typography', title: 'Typography Research', type: 'channel', blockCount: 12 },
        { id: 'prototyping', title: 'Prototyping Notes', type: 'channel', blockCount: 8 },
        { id: 'design-systems', title: 'Design Systems', type: 'channel', blockCount: 24 },
        { id: 'color-theory', title: 'Color Theory', type: 'channel', blockCount: 15 },
        { id: 'pc98-archive', title: 'PC-98 Archive', type: 'channel', blockCount: 156 },
        { id: 'audio-patterns', title: 'Audio Patterns', type: 'channel', blockCount: 7 },
        { id: 'commit-mono', title: 'Commit Mono Typeface', type: 'block', parentChannel: 'Typography' },
        { id: 'type-hierarchy', title: 'Type Hierarchy Notes', type: 'block', parentChannel: 'Design Systems' },
        { id: 'dither-50', title: 'Dither Pattern 50%', type: 'block', parentChannel: 'PC-98 Archive' },
        { id: 'farrow-ball', title: 'Farrow & Ball Palette', type: 'block', parentChannel: 'Color Theory' }
      ];

      waypoint.addEventListener('garden:navigate', (e) => {
        console.log('Navigate to:', e.detail);
        alert(`Navigating to: ${e.detail.title} (${e.detail.type})`);
      });

      waypoint.addEventListener('garden:connect', (e) => {
        console.log('Connect:', e.detail);
        alert(`Connected "${e.detail.blockTitle}" to channel "${e.detail.channelTitle}"`);
        document.getElementById('context-menu-status').textContent =
          `Connected "${e.detail.blockTitle}" to "${e.detail.channelTitle}"`;
      });

      waypoint.addEventListener('garden:create-channel', (e) => {
        console.log('Create channel:', e.detail);
        const channelName = prompt('Enter new channel name:');
        if (channelName) {
          alert(`Would create channel "${channelName}" and connect "${e.detail.connectTarget?.title}"`);
        }
      });

      waypoint.addEventListener('garden:close', () => {
        // Reset to navigate mode when closed
        waypoint.mode = 'navigate';
        waypoint.connectTarget = undefined;
      });
    });

    // Initialize grid demo
    customElements.whenDefined('garden-grid').then(() => {
      const grid = document.getElementById('grid-demo');
      renderGridItems(1, 8);

      grid.addEventListener('garden:page-change', (e) => {
        grid.loading = true;
        // Simulate network delay
        setTimeout(() => {
          renderGridItems(e.detail.page, e.detail.pageSize);
          grid.loading = false;
        }, 300);
      });
    });
  </script>
</body>
</html>
